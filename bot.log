nohup: ignoring input
[2m2025-10-09T13:38:21.786014Z[0m [[32m[1minfo     [0m] [1mLogging configured successfully[0m [[0m[1m[34mlogging_setup[0m][0m [36mfile_path[0m=[35m/home/botseller/sell/logs/seller_krypto.log[0m
[2m2025-10-09T13:38:26.016464Z[0m [[32m[1minfo     [0m] [1mStarting Telegram Sales Bot in development mode...[0m [[0m[1m[34m__main__[0m][0m
[2m2025-10-09T13:38:26.017049Z[0m [[32m[1minfo     [0m] [1mBot will use polling mode (no webhook required)[0m [[0m[1m[34m__main__[0m][0m
[2m2025-10-09T13:38:26.017254Z[0m [[32m[1minfo     [0m] [1mPress Ctrl+C to stop the bot  [0m [[0m[1m[34m__main__[0m][0m
[2m2025-10-09T13:38:26.017968Z[0m [[32m[1minfo     [0m] [1mStarting bot in polling mode  [0m [[0m[1m[34mapp.bot[0m][0m
[2m2025-10-09T13:38:26.279672Z[0m [[32m[1minfo     [0m] [1mBot commands set successfully [0m [[0m[1m[34mapp.bot[0m][0m
[2m2025-10-09T13:38:26.280098Z[0m [[32m[1minfo     [0m] [1mBot started successfully      [0m [[0m[1m[34mapp.bot[0m][0m [36mmode[0m=[35mpolling[0m
[2m2025-10-09T13:38:26.280948Z[0m [[32m[1minfo     [0m] [1mStart polling                 [0m [[0m[1m[34maiogram.dispatcher[0m][0m
[2m2025-10-09T13:38:26.335764Z[0m [[32m[1minfo     [0m] [1mRun polling for bot @Seller_krypto_bot id=8490095311 - 'Seller KRYPTO'[0m [[0m[1m[34maiogram.dispatcher[0m][0m
[2m2025-10-09T13:38:26.416555Z[0m [[32m[1minfo     [0m] [1mIncoming message              [0m [[0m[1m[34mapp.middlewares.logging[0m][0m [36mcontent_type[0m=[35mtext[0m [36mevent_type[0m=[35mMessage[0m [36mrequest_id[0m=[35mbaab426f-036c-43c5-bc13-d9e65f78badd[0m [36mtext[0m=[35m/start[0m [36muser_id[0m=[35m5481270774[0m [36musername[0m=[35maawwwaww[0m
2025-10-09 16:38:26,473 INFO sqlalchemy.engine.Engine select pg_catalog.version()
[2m2025-10-09T13:38:26.474229Z[0m [[32m[1minfo     [0m] [1mselect pg_catalog.version()   [0m [[0m[1m[34msqlalchemy.engine.Engine[0m][0m
2025-10-09 16:38:26,474 INFO sqlalchemy.engine.Engine [raw sql] ()
[2m2025-10-09T13:38:26.474761Z[0m [[32m[1minfo     [0m] [1m[raw sql] ()                  [0m [[0m[1m[34msqlalchemy.engine.Engine[0m][0m
2025-10-09 16:38:26,476 INFO sqlalchemy.engine.Engine select current_schema()
[2m2025-10-09T13:38:26.476996Z[0m [[32m[1minfo     [0m] [1mselect current_schema()       [0m [[0m[1m[34msqlalchemy.engine.Engine[0m][0m
2025-10-09 16:38:26,477 INFO sqlalchemy.engine.Engine [raw sql] ()
[2m2025-10-09T13:38:26.477291Z[0m [[32m[1minfo     [0m] [1m[raw sql] ()                  [0m [[0m[1m[34msqlalchemy.engine.Engine[0m][0m
2025-10-09 16:38:26,478 INFO sqlalchemy.engine.Engine show standard_conforming_strings
[2m2025-10-09T13:38:26.478927Z[0m [[32m[1minfo     [0m] [1mshow standard_conforming_strings[0m [[0m[1m[34msqlalchemy.engine.Engine[0m][0m
2025-10-09 16:38:26,479 INFO sqlalchemy.engine.Engine [raw sql] ()
[2m2025-10-09T13:38:26.479202Z[0m [[32m[1minfo     [0m] [1m[raw sql] ()                  [0m [[0m[1m[34msqlalchemy.engine.Engine[0m][0m
2025-10-09 16:38:26,480 INFO sqlalchemy.engine.Engine BEGIN (implicit)
[2m2025-10-09T13:38:26.480958Z[0m [[32m[1minfo     [0m] [1mBEGIN (implicit)              [0m [[0m[1m[34msqlalchemy.engine.Engine[0m][0m
2025-10-09 16:38:26,535 INFO sqlalchemy.engine.Engine SELECT users.id, users.telegram_id, users.username, users.first_name, users.last_name, users.phone, users.email, users.segment, users.lead_score, users.funnel_stage, users.source, users.is_blocked, users.created_at, users.updated_at 
FROM users 
WHERE users.telegram_id = $1::BIGINT
[2m2025-10-09T13:38:26.535815Z[0m [[32m[1minfo     [0m] [1mSELECT users.id, users.telegram_id, users.username, users.first_name, users.last_name, users.phone, users.email, users.segment, users.lead_score, users.funnel_stage, users.source, users.is_blocked, users.created_at, users.updated_at 
FROM users 
WHERE users.telegram_id = $1::BIGINT[0m [[0m[1m[34msqlalchemy.engine.Engine[0m][0m
2025-10-09 16:38:26,536 INFO sqlalchemy.engine.Engine [generated in 0.00085s] (5481270774,)
[2m2025-10-09T13:38:26.536212Z[0m [[32m[1minfo     [0m] [1m[generated in 0.00085s] (5481270774,)[0m [[0m[1m[34msqlalchemy.engine.Engine[0m][0m
2025-10-09 16:38:26,542 INFO sqlalchemy.engine.Engine INSERT INTO users (telegram_id, username, first_name, last_name, phone, email, segment, lead_score, funnel_stage, source, is_blocked) VALUES ($1::BIGINT, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::BOOLEAN) RETURNING users.id, users.created_at, users.updated_at
[2m2025-10-09T13:38:26.542949Z[0m [[32m[1minfo     [0m] [1mINSERT INTO users (telegram_id, username, first_name, last_name, phone, email, segment, lead_score, funnel_stage, source, is_blocked) VALUES ($1::BIGINT, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::BOOLEAN) RETURNING users.id, users.created_at, users.updated_at[0m [[0m[1m[34msqlalchemy.engine.Engine[0m][0m
2025-10-09 16:38:26,543 INFO sqlalchemy.engine.Engine [generated in 0.00078s] (5481270774, 'aawwwaww', 'ðŸ‘€', None, None, None, None, 0, <FunnelStage.NEW: 'new'>, None, False)
[2m2025-10-09T13:38:26.543290Z[0m [[32m[1minfo     [0m] [1m[generated in 0.00078s] (5481270774, 'aawwwaww', 'ðŸ‘€', None, None, None, None, 0, <FunnelStage.NEW: 'new'>, None, False)[0m [[0m[1m[34msqlalchemy.engine.Engine[0m][0m
2025-10-09 16:38:26,548 INFO sqlalchemy.engine.Engine SELECT users.id, users.telegram_id, users.username, users.first_name, users.last_name, users.phone, users.email, users.segment, users.lead_score, users.funnel_stage, users.source, users.is_blocked, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::BIGINT
[2m2025-10-09T13:38:26.548963Z[0m [[32m[1minfo     [0m] [1mSELECT users.id, users.telegram_id, users.username, users.first_name, users.last_name, users.phone, users.email, users.segment, users.lead_score, users.funnel_stage, users.source, users.is_blocked, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::BIGINT[0m [[0m[1m[34msqlalchemy.engine.Engine[0m][0m
2025-10-09 16:38:26,549 INFO sqlalchemy.engine.Engine [generated in 0.00055s] (1,)
[2m2025-10-09T13:38:26.549301Z[0m [[32m[1minfo     [0m] [1m[generated in 0.00055s] (1,)  [0m [[0m[1m[34msqlalchemy.engine.Engine[0m][0m
[2m2025-10-09T13:38:26.551159Z[0m [[32m[1minfo     [0m] [1mUser created                  [0m [[0m[1m[34mapp.repositories.user_repository[0m][0m [36mtelegram_id[0m=[35m5481270774[0m [36muser_id[0m=[35m1[0m [36musername[0m=[35maawwwaww[0m
2025-10-09 16:38:26,551 INFO sqlalchemy.engine.Engine SELECT users.id, users.telegram_id, users.username, users.first_name, users.last_name, users.phone, users.email, users.segment, users.lead_score, users.funnel_stage, users.source, users.is_blocked, users.created_at, users.updated_at 
FROM users 
WHERE users.telegram_id = $1::BIGINT
[2m2025-10-09T13:38:26.551992Z[0m [[32m[1minfo     [0m] [1mSELECT users.id, users.telegram_id, users.username, users.first_name, users.last_name, users.phone, users.email, users.segment, users.lead_score, users.funnel_stage, users.source, users.is_blocked, users.created_at, users.updated_at 
FROM users 
WHERE users.telegram_id = $1::BIGINT[0m [[0m[1m[34msqlalchemy.engine.Engine[0m][0m
2025-10-09 16:38:26,552 INFO sqlalchemy.engine.Engine [cached since 0.01697s ago] (5481270774,)
[2m2025-10-09T13:38:26.552291Z[0m [[32m[1minfo     [0m] [1m[cached since 0.01697s ago] (5481270774,)[0m [[0m[1m[34msqlalchemy.engine.Engine[0m][0m
[2m2025-10-09T13:38:26.826396Z[0m [[32m[1minfo     [0m] [1mStart command processed, bonus offered[0m [[0m[1m[34mapp.handlers.start[0m][0m [36muser_id[0m=[35m1[0m
2025-10-09 16:38:26,827 INFO sqlalchemy.engine.Engine COMMIT
[2m2025-10-09T13:38:26.827238Z[0m [[32m[1minfo     [0m] [1mCOMMIT                        [0m [[0m[1m[34msqlalchemy.engine.Engine[0m][0m
[2m2025-10-09T13:38:26.829066Z[0m [[32m[1minfo     [0m] [1mEvent processed successfully  [0m [[0m[1m[34mapp.middlewares.logging[0m][0m [36mevent_type[0m=[35mMessage[0m [36mrequest_id[0m=[35mbaab426f-036c-43c5-bc13-d9e65f78badd[0m [36muser_id[0m=[35m5481270774[0m [36musername[0m=[35maawwwaww[0m
[2m2025-10-09T13:38:26.829495Z[0m [[32m[1minfo     [0m] [1mUpdate id=40341228 is handled. Duration 413 ms by bot id=8490095311[0m [[0m[1m[34maiogram.event[0m][0m
[2m2025-10-09T13:38:32.542718Z[0m [[32m[1minfo     [0m] [1mIncoming callback query       [0m [[0m[1m[34mapp.middlewares.logging[0m][0m [36mdata[0m=[35mbonus:get_file[0m [36mevent_type[0m=[35mCallbackQuery[0m [36mrequest_id[0m=[35m45e9672f-2bf3-4cba-a509-a5437e7687f2[0m [36muser_id[0m=[35m5481270774[0m [36musername[0m=[35maawwwaww[0m
2025-10-09 16:38:32,545 INFO sqlalchemy.engine.Engine BEGIN (implicit)
[2m2025-10-09T13:38:32.545881Z[0m [[32m[1minfo     [0m] [1mBEGIN (implicit)              [0m [[0m[1m[34msqlalchemy.engine.Engine[0m][0m
2025-10-09 16:38:32,546 INFO sqlalchemy.engine.Engine SELECT users.id, users.telegram_id, users.username, users.first_name, users.last_name, users.phone, users.email, users.segment, users.lead_score, users.funnel_stage, users.source, users.is_blocked, users.created_at, users.updated_at 
FROM users 
WHERE users.telegram_id = $1::BIGINT
[2m2025-10-09T13:38:32.549927Z[0m [[32m[1minfo     [0m] [1mSELECT users.id, users.telegram_id, users.username, users.first_name, users.last_name, users.phone, users.email, users.segment, users.lead_score, users.funnel_stage, users.source, users.is_blocked, users.created_at, users.updated_at 
FROM users 
WHERE users.telegram_id = $1::BIGINT[0m [[0m[1m[34msqlalchemy.engine.Engine[0m][0m
2025-10-09 16:38:32,550 INFO sqlalchemy.engine.Engine [cached since 6.015s ago] (5481270774,)
[2m2025-10-09T13:38:32.550342Z[0m [[32m[1minfo     [0m] [1m[cached since 6.015s ago] (5481270774,)[0m [[0m[1m[34msqlalchemy.engine.Engine[0m][0m
[2m2025-10-09T13:38:32.648050Z[0m [[31m[1merror    [0m] [1mError sending bonus file or follow-up[0m [[0m[1m[34mapp.handlers.start[0m][0m [36merror[0m=[35m'HTTP Client says - ClientOSError: [Errno 2] Can not write request body for https://api.telegram.org/bot8490095311:AAGHt_W7oO7KnaxvKEp55wvYypQbBge4LTQ/sendDocument'[0m
Traceback (most recent call last):
  File "/home/botseller/sell/.venv/lib/python3.12/site-packages/aiohttp/client_reqrep.py", line 667, in write_bytes
    await self.body.write(writer)
  File "/home/botseller/sell/.venv/lib/python3.12/site-packages/aiohttp/multipart.py", line 1010, in write
    await part.write(writer)
  File "/home/botseller/sell/.venv/lib/python3.12/site-packages/aiohttp/payload.py", line 487, in write
    chunk = await self._iter.__anext__()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/botseller/sell/.venv/lib/python3.12/site-packages/aiogram/types/input_file.py", line 103, in read
    async with aiofiles.open(self.path, "rb") as f:
  File "/home/botseller/sell/.venv/lib/python3.12/site-packages/aiofiles/base.py", line 63, in __aenter__
    return await self
           ^^^^^^^^^^
  File "/home/botseller/sell/.venv/lib/python3.12/site-packages/aiofiles/base.py", line 59, in __await__
    self._obj = yield from self._coro.__await__()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/botseller/sell/.venv/lib/python3.12/site-packages/aiofiles/threadpool/__init__.py", line 92, in _open
    f = await loop.run_in_executor(executor, cb)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
FileNotFoundError: [Errno 2] No such file or directory: 'bonus/bonus.pdf'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/botseller/sell/.venv/lib/python3.12/site-packages/aiogram/client/session/aiohttp.py", line 181, in make_request
    async with session.post(
  File "/home/botseller/sell/.venv/lib/python3.12/site-packages/aiohttp/client.py", line 1360, in __aenter__
    self._resp: _RetType = await self._coro
                           ^^^^^^^^^^^^^^^^
  File "/home/botseller/sell/.venv/lib/python3.12/site-packages/aiohttp/client.py", line 690, in _request
    await resp.start(conn)
  File "/home/botseller/sell/.venv/lib/python3.12/site-packages/aiohttp/client_reqrep.py", line 1059, in start
    message, payload = await protocol.read()  # type: ignore[union-attr]
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/home/botseller/sell/.venv/lib/python3.12/site-packages/aiohttp/streams.py", line 644, in read
    await self._waiter
aiohttp.client_exceptions.ClientOSError: [Errno 2] Can not write request body for https://api.telegram.org/bot8490095311:AAGHt_W7oO7KnaxvKEp55wvYypQbBge4LTQ/sendDocument

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/botseller/sell/app/handlers/start.py", line 68, in send_bonus_file
    await callback.message.answer_document(
  File "/home/botseller/sell/.venv/lib/python3.12/site-packages/aiogram/methods/base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "/home/botseller/sell/.venv/lib/python3.12/site-packages/aiogram/client/bot.py", line 488, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/botseller/sell/.venv/lib/python3.12/site-packages/aiogram/client/session/base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/botseller/sell/.venv/lib/python3.12/site-packages/aiogram/client/session/aiohttp.py", line 188, in make_request
    raise TelegramNetworkError(method=method, message=f"{type(e).__name__}: {e}")
aiogram.exceptions.TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 2] Can not write request body for https://api.telegram.org/bot8490095311:AAGHt_W7oO7KnaxvKEp55wvYypQbBge4LTQ/sendDocument
2025-10-09 16:38:32,857 INFO sqlalchemy.engine.Engine COMMIT
[2m2025-10-09T13:38:32.857519Z[0m [[32m[1minfo     [0m] [1mCOMMIT                        [0m [[0m[1m[34msqlalchemy.engine.Engine[0m][0m
[2m2025-10-09T13:38:32.858685Z[0m [[32m[1minfo     [0m] [1mEvent processed successfully  [0m [[0m[1m[34mapp.middlewares.logging[0m][0m [36mevent_type[0m=[35mCallbackQuery[0m [36mrequest_id[0m=[35m45e9672f-2bf3-4cba-a509-a5437e7687f2[0m [36muser_id[0m=[35m5481270774[0m [36musername[0m=[35maawwwaww[0m
[2m2025-10-09T13:38:32.859065Z[0m [[32m[1minfo     [0m] [1mUpdate id=40341229 is handled. Duration 317 ms by bot id=8490095311[0m [[0m[1m[34maiogram.event[0m][0m
[2m2025-10-09T13:40:26.755003Z[0m [[33m[1mwarning  [0m] [1mReceived SIGTERM signal       [0m [[0m[1m[34maiogram.dispatcher[0m][0m
[2m2025-10-09T13:40:26.756240Z[0m [[32m[1minfo     [0m] [1mPolling stopped for bot @Seller_krypto_bot id=8490095311 - 'Seller KRYPTO'[0m [[0m[1m[34maiogram.dispatcher[0m][0m
[2m2025-10-09T13:40:26.756557Z[0m [[32m[1minfo     [0m] [1mPolling stopped               [0m [[0m[1m[34maiogram.dispatcher[0m][0m
[2m2025-10-09T13:40:27.201397Z[0m [[32m[1minfo     [0m] [1mWebhook removed successfully  [0m [[0m[1m[34mapp.bot[0m][0m
[2m2025-10-09T13:40:27.454876Z[0m [[32m[1minfo     [0m] [1mBot shutdown completed        [0m [[0m[1m[34mapp.bot[0m][0m
